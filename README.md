# Clinic Legacy App Refactoring Project

**Team:** Nbee_Nt5rj.py
**Course Project:** Software Maintenance & Evolution
**Status:** Completed (Refactoring & Evolution Phase)
**Timeline:** Dec 6, 2025 – Dec 21, 2025

---

## Project Overview

The **Clinic Legacy App** started as a monolithic, fragile Flask application plagued by "Code Smells" such as God Object, Duplicate Code, and Global State.

Our team performed a comprehensive **Preventive and Perfective Maintenance** cycle. We refactored the codebase into a modular, object-oriented architecture and implemented new features (Search, Validation) and a modern UI/UX design.

### Key Achievements

* **Architecture:** Migrated from `app.py` monolith to a **Repository Pattern** with Domain Models.
* **Data Integrity:** Normalized appointment data (referencing `patient_id` instead of copying objects).
* **User Experience:** Implemented a full **Healthcare Design System** (CSS variables, responsive cards).
* **Functionality:** Added Appointment Search and comprehensive Form Validation with Flash messages.
* **Quality Assurance:** Added **17 Unit Tests** achieving ~90% coverage of the data layer.

---

## The Team

| Name | Role | Responsibilities |
| --- | --- | --- |
| **Mohamed Jamal Al Tarhoni** | Scrum Master | Planning, Coordination, Risk Management |
| **Mohamed Ramadan Alwerfalli** | Documentation Lead | Analysis, Metrics, Architecture Design, Reporting |
| **Ali Agela** | Lead Developer | Core Refactoring, Features (Search/Validation), Unit Testing |

---

## Architecture Transformation

### Before (Legacy State)

A single **128-line** file (`app.py`) handling routing, database logic, and API endpoints using global lists.

### After (Modern State)

A modular structure ensuring **Separation of Concerns**:

```text
Clinic_legacy_project/
├── app.py                # Web Controllers (Routing only)
├── models.py             # Domain Entities (Patient, Appointment classes)
├── repository.py         # Data Access Layer (CRUD Logic)
├── test_repository.py    # Unit Test Suite (pytest)
├── static/
│   ├── css/style.css     # Modern Design System
│   └── js/app.js         # Frontend Interactivity
└── templates/            # HTML Templates (Responsive & Styled)

```

---

## Setup & Installation

**Prerequisites:** Python 3.8+

1. **Clone the repository:**
```bash
git clone https://github.com/your-repo/clinic-legacy.git
cd clinic-legacy

```


2. **Create a virtual environment:**
```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

```


3. **Install dependencies:**
```bash
pip install flask pytest

```


4. **Run the application:**
```bash
python app.py

```


*Access the app at:* `http://127.0.0.1:5000`

---

## Running Tests

We utilize **pytest** to verify the integrity of our Repository layer.

```bash
python -m pytest test_repository.py -v

```

**Expected Output:**

> `17 passed in 0.04s`
> (Tests cover Create, Read, Update, Delete, Search, and Cascade Delete scenarios)

---

## Maintenance Metrics

| Metric | Before | After | Insight |
| --- | --- | --- | --- |
| **LOC (Python)** | 128 | 354 | Increased due to modularity & comments |
| **Total LOC (w/ UI)** | 199 | 746 | Includes new Design System (CSS/JS) |
| **Code Smells** | 6 (High Severity) | 0 | Technical debt fully paid down |
| **Function Points** | 43.2 | 54.6 | Added value (Search + Validation) |
| **Test Coverage** | 0% | ~90% | (Repository Layer) |

---

*Generated by Team Nbee_Nt5rj.py | Dec 2025*
